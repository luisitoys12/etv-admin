<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Documentaci√≥n de Configuraci√≥n de Firestore - ETV Admin</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f7fa;
        }
        .container {
            background-color: white;
            padding: 40px;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        h1 {
            color: #2c3e50;
            border-bottom: 3px solid #3498db;
            padding-bottom: 10px;
            margin-bottom: 30px;
        }
        h2 {
            color: #34495e;
            margin-top: 40px;
            margin-bottom: 20px;
            border-left: 4px solid #3498db;
            padding-left: 15px;
        }
        h3 {
            color: #2980b9;
            margin-top: 30px;
            margin-bottom: 15px;
        }
        .code-block {
            background-color: #2c3e50;
            color: #ecf0f1;
            padding: 20px;
            border-radius: 8px;
            margin: 15px 0;
            overflow-x: auto;
            font-family: 'Courier New', monospace;
            font-size: 14px;
        }
        .json-example {
            background-color: #f8f9fa;
            border: 1px solid #e9ecef;
            border-left: 4px solid #28a745;
            padding: 15px;
            border-radius: 5px;
            margin: 15px 0;
            font-family: 'Courier New', monospace;
            font-size: 13px;
        }
        .warning {
            background-color: #fff3cd;
            border: 1px solid #ffeaa7;
            border-left: 4px solid #f39c12;
            padding: 15px;
            border-radius: 5px;
            margin: 15px 0;
        }
        .info {
            background-color: #d1ecf1;
            border: 1px solid #bee5eb;
            border-left: 4px solid #17a2b8;
            padding: 15px;
            border-radius: 5px;
            margin: 15px 0;
        }
        .step {
            background-color: #f8f9fa;
            border: 1px solid #dee2e6;
            padding: 15px;
            margin: 10px 0;
            border-radius: 5px;
        }
        .step-number {
            background-color: #3498db;
            color: white;
            width: 25px;
            height: 25px;
            border-radius: 50%;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin-right: 10px;
        }
        ul li {
            margin: 8px 0;
        }
        .footer {
            text-align: center;
            margin-top: 50px;
            padding: 20px;
            background-color: #2c3e50;
            color: white;
            border-radius: 8px;
            font-style: italic;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }
        th, td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }
        th {
            background-color: #3498db;
            color: white;
        }
        tr:hover {
            background-color: #f5f5f5;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üìö Documentaci√≥n de Configuraci√≥n de Firestore para ETV Admin</h1>
        
        <div class="info">
            <strong>üìã Resumen:</strong> Esta documentaci√≥n te guiar√° paso a paso para configurar Firebase y Firestore para que el proyecto ETV Admin funcione correctamente. Incluye la estructura completa de datos, ejemplos JSON y configuraci√≥n de permisos.
        </div>

        <h2>üöÄ 1. Configuraci√≥n Inicial de Firebase</h2>
        
        <h3>Paso 1: Crear Proyecto en Firebase</h3>
        <div class="step">
            <span class="step-number">1</span>
            <strong>Accede a Firebase Console:</strong>
            <ul>
                <li>Ve a <a href="https://console.firebase.google.com" target="_blank">https://console.firebase.google.com</a></li>
                <li>Inicia sesi√≥n con tu cuenta de Google</li>
            </ul>
        </div>

        <div class="step">
            <span class="step-number">2</span>
            <strong>Crear nuevo proyecto:</strong>
            <ul>
                <li>Haz clic en "Crear un proyecto"</li>
                <li>Introduce un nombre para tu proyecto (ej: "etv-studio")</li>
                <li>Configura Google Analytics (opcional)</li>
                <li>Haz clic en "Crear proyecto"</li>
            </ul>
        </div>

        <h3>Paso 2: Habilitar Firestore Database</h3>
        <div class="step">
            <span class="step-number">3</span>
            <strong>Activar Firestore:</strong>
            <ul>
                <li>En el panel de Firebase, ve a "Firestore Database"</li>
                <li>Haz clic en "Crear base de datos"</li>
                <li>Selecciona "Comenzar en modo de prueba" (configuraremos las reglas despu√©s)</li>
                <li>Elige una ubicaci√≥n para tu base de datos (recomendado: m√°s cercana a tus usuarios)</li>
            </ul>
        </div>

        <h3>Paso 3: Obtener Configuraci√≥n Web</h3>
        <div class="step">
            <span class="step-number">4</span>
            <strong>Registrar aplicaci√≥n web:</strong>
            <ul>
                <li>En "Configuraci√≥n del proyecto" ‚Üí "Tus aplicaciones"</li>
                <li>Haz clic en el √≠cono web (&lt;/&gt;)</li>
                <li>Registra tu aplicaci√≥n con un nombre</li>
                <li>Copia la configuraci√≥n que aparece:</li>
            </ul>
        </div>

        <div class="code-block">
const firebaseConfig = {
  apiKey: "tu-api-key",
  authDomain: "tu-proyecto.firebaseapp.com",
  projectId: "tu-proyecto-id",
  storageBucket: "tu-proyecto.firebasestorage.app",
  messagingSenderId: "123456789",
  appId: "1:123456789:web:abcdef123456",
  measurementId: "G-ABCDEF1234"
};
        </div>

        <div class="step">
            <span class="step-number">5</span>
            <strong>Actualizar archivos del proyecto:</strong>
            <ul>
                <li>Reemplaza la configuraci√≥n en <code>index.html</code> (l√≠neas 31-39)</li>
                <li>Reemplaza la configuraci√≥n en <code>admin.html</code> si est√° usando valores de prueba</li>
            </ul>
        </div>

        <h2>üóÇÔ∏è 2. Estructura de Colecciones y Documentos</h2>

        <div class="warning">
            <strong>‚ö†Ô∏è Importante:</strong> La estructura de datos debe seguir exactamente este formato para que la aplicaci√≥n funcione correctamente.
        </div>

        <h3>Colecci√≥n "programacion"</h3>
        <p><strong>Descripci√≥n:</strong> Almacena la programaci√≥n semanal del canal de televisi√≥n.</p>
        <p><strong>Estructura:</strong> Cada documento representa un programa y debe tener los siguientes campos:</p>

        <table>
            <thead>
                <tr>
                    <th>Campo</th>
                    <th>Tipo</th>
                    <th>Descripci√≥n</th>
                    <th>Requerido</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>title</td>
                    <td>string</td>
                    <td>Nombre del programa</td>
                    <td>S√≠</td>
                </tr>
                <tr>
                    <td>day</td>
                    <td>string</td>
                    <td>D√≠a de la semana (Lunes, Martes, etc.)</td>
                    <td>S√≠</td>
                </tr>
                <tr>
                    <td>time</td>
                    <td>string</td>
                    <td>Horario de transmisi√≥n</td>
                    <td>S√≠</td>
                </tr>
                <tr>
                    <td>description</td>
                    <td>string</td>
                    <td>Descripci√≥n del programa</td>
                    <td>S√≠</td>
                </tr>
                <tr>
                    <td>image</td>
                    <td>string</td>
                    <td>URL de la imagen promocional</td>
                    <td>S√≠</td>
                </tr>
            </tbody>
        </table>

        <p><strong>Ejemplo JSON:</strong></p>
        <div class="json-example">
{
  "title": "Noticias ETV",
  "day": "Lunes",
  "time": "20:00",
  "description": "Informativo nocturno con las noticias m√°s relevantes del d√≠a, an√°lisis pol√≠tico y deportes.",
  "image": "https://images.unsplash.com/photo-1504711434969-e33886168f5c?w=400"
}
        </div>

        <div class="json-example">
{
  "title": "M√∫sica y M√°s",
  "day": "Viernes",
  "time": "18:00",
  "description": "Programa musical con los √∫ltimos √©xitos y entrevistas a artistas emergentes.",
  "image": "https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?w=400"
}
        </div>

        <h3>Colecci√≥n "top10" ‚Üí Documento "config"</h3>
        <p><strong>Descripci√≥n:</strong> Configuraci√≥n del Top 10 musical que aparece en la p√°gina principal.</p>
        <p><strong>ID del documento:</strong> <code>config</code> (exactamente as√≠)</p>

        <table>
            <thead>
                <tr>
                    <th>Campo</th>
                    <th>Tipo</th>
                    <th>Descripci√≥n</th>
                    <th>Requerido</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>image</td>
                    <td>string</td>
                    <td>URL de la imagen del Top 10</td>
                    <td>S√≠</td>
                </tr>
                <tr>
                    <td>playlistId</td>
                    <td>string</td>
                    <td>ID de la playlist de YouTube</td>
                    <td>S√≠</td>
                </tr>
            </tbody>
        </table>

        <p><strong>Ejemplo JSON:</strong></p>
        <div class="json-example">
{
  "image": "https://images.unsplash.com/photo-1470225620780-b889fba42a7c?w=800",
  "playlistId": "PL0Tz1eP0c26D6-r_t2r7x-9J3b2r_7K9o"
}
        </div>

        <h3>Colecci√≥n "mensajes" ‚Üí Documento "liveMessage"</h3>
        <p><strong>Descripci√≥n:</strong> Mensaje en vivo que aparece en la parte superior de la p√°gina cuando est√° activo.</p>
        <p><strong>ID del documento:</strong> <code>liveMessage</code> (exactamente as√≠)</p>

        <table>
            <thead>
                <tr>
                    <th>Campo</th>
                    <th>Tipo</th>
                    <th>Descripci√≥n</th>
                    <th>Requerido</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>text</td>
                    <td>string</td>
                    <td>Texto del mensaje en vivo</td>
                    <td>S√≠</td>
                </tr>
            </tbody>
        </table>

        <p><strong>Ejemplo JSON:</strong></p>
        <div class="json-example">
{
  "text": "üî¥ TRANSMISI√ìN ESPECIAL: Cobertura en vivo del evento musical m√°s esperado del a√±o. ¬°No te lo pierdas!"
}
        </div>

        <h3>Colecci√≥n "encuestas" ‚Üí Documento "currentPoll"</h3>
        <p><strong>Descripci√≥n:</strong> Encuesta interactiva que aparece durante la transmisi√≥n en vivo.</p>
        <p><strong>ID del documento:</strong> <code>currentPoll</code> (exactamente as√≠)</p>

        <table>
            <thead>
                <tr>
                    <th>Campo</th>
                    <th>Tipo</th>
                    <th>Descripci√≥n</th>
                    <th>Requerido</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>question</td>
                    <td>string</td>
                    <td>Pregunta de la encuesta</td>
                    <td>S√≠</td>
                </tr>
                <tr>
                    <td>options</td>
                    <td>array</td>
                    <td>Array de objetos con las opciones de respuesta</td>
                    <td>S√≠</td>
                </tr>
            </tbody>
        </table>

        <p><strong>Estructura de cada opci√≥n:</strong></p>
        <table>
            <thead>
                <tr>
                    <th>Campo</th>
                    <th>Tipo</th>
                    <th>Descripci√≥n</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>text</td>
                    <td>string</td>
                    <td>Texto de la opci√≥n</td>
                </tr>
            </tbody>
        </table>

        <p><strong>Ejemplo JSON:</strong></p>
        <div class="json-example">
{
  "question": "¬øCu√°l es tu g√©nero musical favorito?",
  "options": [
    {
      "text": "Rock"
    },
    {
      "text": "Pop"
    },
    {
      "text": "Reggaeton"
    }
  ]
}
        </div>

        <h2>üîí 3. Configuraci√≥n de Permisos en Firestore</h2>

        <p>Para que la aplicaci√≥n funcione correctamente, necesitas configurar las reglas de seguridad de Firestore para permitir <strong>lectura p√∫blica</strong> de los datos.</p>

        <h3>Configurar Reglas de Seguridad</h3>
        <div class="step">
            <span class="step-number">6</span>
            <strong>Acceder a las reglas:</strong>
            <ul>
                <li>En Firebase Console, ve a "Firestore Database"</li>
                <li>Haz clic en la pesta√±a "Reglas"</li>
                <li>Reemplaza las reglas existentes con las siguientes:</li>
            </ul>
        </div>

        <div class="code-block">
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    // Permitir lectura p√∫blica para todas las colecciones necesarias
    match /programacion/{document} {
      allow read: if true;
      allow write: if false; // Solo lectura p√∫blica
    }
    
    match /top10/{document} {
      allow read: if true;
      allow write: if false; // Solo lectura p√∫blica
    }
    
    match /mensajes/{document} {
      allow read: if true;
      allow write: if false; // Solo lectura p√∫blica
    }
    
    match /encuestas/{document} {
      allow read: if true;
      allow write: if false; // Solo lectura p√∫blica
    }
    
    // Bloquear acceso a otras colecciones
    match /{document=**} {
      allow read, write: if false;
    }
  }
}
        </div>

        <div class="warning">
            <strong>‚ö†Ô∏è Nota de Seguridad:</strong> Estas reglas permiten lectura p√∫blica pero NO escritura. Para administrar el contenido, necesitar√°s usar el panel de administraci√≥n (admin.html) o la consola de Firebase directamente.
        </div>

        <h3>Reglas Alternativas (con Autenticaci√≥n para Escritura)</h3>
        <p>Si deseas permitir escritura desde el panel de administraci√≥n, puedes usar estas reglas m√°s permisivas:</p>

        <div class="code-block">
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    // Permitir lectura p√∫blica y escritura para usuarios autenticados
    match /programacion/{document} {
      allow read: if true;
      allow write: if request.auth != null;
    }
    
    match /top10/{document} {
      allow read: if true;
      allow write: if request.auth != null;
    }
    
    match /mensajes/{document} {
      allow read: if true;
      allow write: if request.auth != null;
    }
    
    match /encuestas/{document} {
      allow read: if true;
      allow write: if request.auth != null;
    }
  }
}
        </div>

        <h2>üìù 4. Pasos de Implementaci√≥n</h2>

        <div class="step">
            <span class="step-number">7</span>
            <strong>Crear las colecciones:</strong>
            <ul>
                <li>En Firestore Console, crea manualmente cada colecci√≥n</li>
                <li>Agrega al menos un documento de ejemplo en cada colecci√≥n</li>
                <li>Usa los ejemplos JSON proporcionados arriba</li>
            </ul>
        </div>

        <div class="step">
            <span class="step-number">8</span>
            <strong>Probar la conexi√≥n:</strong>
            <ul>
                <li>Abre <code>index.html</code> en un navegador</li>
                <li>Verifica que la programaci√≥n se carga correctamente</li>
                <li>Comprueba que el Top 10 musical aparece</li>
                <li>Confirma que los mensajes y encuestas funcionan</li>
            </ul>
        </div>

        <div class="step">
            <span class="step-number">9</span>
            <strong>Configurar administraci√≥n:</strong>
            <ul>
                <li>Abre <code>admin.html</code> para gestionar el contenido</li>
                <li>Verifica que puedes agregar, editar y eliminar programas</li>
                <li>Prueba la actualizaci√≥n de mensajes y encuestas</li>
            </ul>
        </div>

        <h2>üîß 5. Soluci√≥n de Problemas</h2>

        <h3>Error: "Firebase not initialized"</h3>
        <ul>
            <li>Verifica que la configuraci√≥n de Firebase est√© correcta</li>
            <li>Comprueba que el projectId coincida con tu proyecto</li>
            <li>Aseg√∫rate de que Firestore est√© habilitado</li>
        </ul>

        <h3>Error: "Permission denied"</h3>
        <ul>
            <li>Revisa las reglas de seguridad de Firestore</li>
            <li>Verifica que las reglas permitan lectura p√∫blica</li>
            <li>Publica las reglas despu√©s de editarlas</li>
        </ul>

        <h3>Datos no aparecen en la p√°gina</h3>
        <ul>
            <li>Verifica que los nombres de las colecciones sean exactos</li>
            <li>Comprueba que los IDs de documentos sean correctos</li>
            <li>Aseg√∫rate de que los campos tengan los nombres esperados</li>
        </ul>

        <h2>üì± 6. Estructura Final Recomendada</h2>

        <div class="info">
            <strong>üéØ Resumen de la estructura completa que debes tener en Firestore:</strong>
        </div>

        <div class="code-block">
üìÅ Firestore Database
‚îú‚îÄ‚îÄ üìÇ programacion/
‚îÇ   ‚îú‚îÄ‚îÄ üìÑ Lunes (documento con campos: title, day, time, description, image)
‚îÇ   ‚îú‚îÄ‚îÄ üìÑ Martes (documento con campos: title, day, time, description, image)
‚îÇ   ‚îú‚îÄ‚îÄ üìÑ Miercoles (documento con campos: title, day, time, description, image)
‚îÇ   ‚îú‚îÄ‚îÄ üìÑ Jueves (documento con campos: title, day, time, description, image)
‚îÇ   ‚îú‚îÄ‚îÄ üìÑ Viernes (documento con campos: title, day, time, description, image)
‚îÇ   ‚îú‚îÄ‚îÄ üìÑ Sabado (documento con campos: title, day, time, description, image)
‚îÇ   ‚îî‚îÄ‚îÄ üìÑ Domingo (documento con campos: title, day, time, description, image)
‚îú‚îÄ‚îÄ üìÇ top10/
‚îÇ   ‚îî‚îÄ‚îÄ üìÑ config (campos: image, playlistId)
‚îú‚îÄ‚îÄ üìÇ mensajes/
‚îÇ   ‚îî‚îÄ‚îÄ üìÑ liveMessage (campo: text)
‚îî‚îÄ‚îÄ üìÇ encuestas/
    ‚îî‚îÄ‚îÄ üìÑ currentPoll (campos: question, options[])
        </div>

        <div class="footer">
            <p><strong>Derechos reservados ekusmedios and ekustv based AI code with love</strong></p>
        </div>
    </div>
</body>
</html>